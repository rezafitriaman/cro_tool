"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function utility() {
    var utility_str = "\n/*\n==============================\nIMPORT MODULE | STATIC\nUTILITY what we have right now are:\n\n- detect envi\n\n- detect language\n\n- detect country\n\n- detect if cookie has gender entity\n\n- detect media query: if mobile or not\n\n- settimeout in a PROMISE so use .then(), resolve(), reject()\n\n  example use:  delay(6000).then(function(result) {\n                  console.log('runs after ' + result);\n                  console.log('appended');\n                  document.getElementsByClassName('btn--orange')[0].classList.add('reza-custom-master');\n\n                });\n- setInterval to find a specifiek element, in a Promise so use .then(), resolve(), reject()\n\n  example use:  findElm('.xxx-xxx-master').then(function(result) {\n                  console.log(result);\n                });\n\n==============================\n*/\n\n//@FindTargetFirst\nexport function FindTargetFirst(target: any, propertyKey: string | symbol, descriptor:PropertyDescriptor): any {\n\n    let customInterval: any;\n    let originalMethod: Function = descriptor.value;\n    \n    // rewrite the function\n    descriptor.value = function() {\n        let context = this;\n        let args = arguments;\n\n        return new Promise(function(resolve) {\n            customInterval = setInterval(function() {\n                let target_elm = document.querySelectorAll(args[0]);\n\n                if(target_elm.length > 0) {\n                    resolve(target_elm);\n                    clearInterval(customInterval);\n                }\n            },100);\n        }).then(function(result) {\n            context.log('find it');\n            context.log(result);\n            originalMethod.apply(context, args);\n        });\n    }\n\n    return descriptor;\n};\n\n//@Debounce(200)\nexport function Debounce(wait:number):any {\n\n    return function(target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) {\n    \n        let timeout:any;\n        //function foo/ target\n        let originalMethod = descriptor.value;\n\n        // rewhrite the function\n        descriptor.value = function() {\n\n            var context = this\n            var args = arguments;\n\n            return new Promise(function(resolve) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tresolve(`delayed ${wait}`);\n\t\t\t\t}, wait)}).then(function(result) {\n\t\t\t\t\tcontext.log('runs after ' + result);\n\t\t\t\toriginalMethod.apply(context, args);\n\t\t\t});\n        };\n\n        return descriptor;\n    }\n};\n\nexport function Module(obj:any):any {\n\treturn function (target:any):any {\n\n\t\treturn class extends target {\n\t\t\tstyle = obj.style;\n\t\t\ttestId = obj.testId;\n\t\t\turlReplaced = obj.urlReplaced;\n\t\t\thead_elm = document.querySelectorAll('head')[0];\n\n\t\t   \tconstructor() {\n\t\t    \tsuper(obj.develop);\n\t\t    \tthis.appendMassage(this.testId);\n\t\t    \tthis.appendJsOrigin(this.testId, this.urlReplaced);\n\t\t    \tthis.url = window.location.href;\n\t\t    \tthis.appendStyle();\n\t\t  \t}\n\t\t  \tappendStyle() {\n\t\t  \t\tthis.head_elm.insertAdjacentHTML('afterbegin', this.style);\n\t\t  \t}\n\t\t  \tlog(input: any) {\n\t\t\t\tif(obj.develop) {\n\t\t  \t\t\tconsole.log(`%ccustom-log = `, 'color: green', input);\n\t\t\t\t}else {\n\t\t\t\t \treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmatch(maxWidth: string) {\n\t\t\t\tlet media:any;\n\t\t\t\tlet width:any = window.matchMedia(\"(max-width:\"+maxWidth+\")\");\n\n\t\t\t\tif (width.matches) { // If media query matches\n\t\t\t\t\tmedia = 'mobile';\n\t\t\t\t} else {\n\t\t\t\t\tmedia = 'desktop or tablet';\n\t\t\t\t}\n\t\t\t\treturn media;\n\t\t\t}\n\t\t\tlanguage() {\n\t\t\t\tlet srclanguage = /(\\w\\w_)/g;\n\n\t\t\t\tlet language = this.url.match(srclanguage);\n\t\t\t\treturn language;\n\t\t\t}\n\t\t\tcountry() {\n\t\t\t\tlet srcCountry = /(_\\w\\w)/g;\n\n\t\t\t\tlet country = this.url.match(srcCountry);\n\t\t\t\treturn country;\n\t\t\t}\n\t\t\tcookieCheck(name: string) {\n\t\t\t\tlet value = \"; \" + document.cookie;\n\t\t\t    let parts = value.split(\"; \" + name + \"=\");\n\t\t\t    if (parts.length == 2) return parts.pop().split(\";\").shift();\n\t\t\t    else return null;\n\t\t\t}\n\t\t\tdelay(ms:number) {\n\t\t\t\treturn new Promise(function(resolve) {\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tresolve(`delayed ${ms}`);\n\t\t\t\t\t}, ms)\n\t\t\t\t});\n\t\t\t}\n\t\t\tappendJsOrigin(testId: string, urlReplaced: string):void {\n\t\t\t\tif(obj.develop) { \n\t\t\t\t\t// WHICH URL \n\t\t\t\t\tvar rawUrl = urlReplaced;\n\t\t\t\t\t// CREATE SCRIPT TAG AND APPEND IT\n\t\t\t\t\tvar head = document.getElementsByTagName('head')[0];\n\t\t\t\t\tvar script = document.createElement('script');\n\t\t\t\t\tscript.type = 'text/javascript';\n\t\t\t\t\tscript.src = rawUrl;\n\t\t\t\t\tscript.id = 't4u-custom-script';\n\t\t\t\t\t//IF EXIST THEN REMOVE IT\n\t\t\t\t\tif(document.getElementById('t4u-custom-script')) {\n\t\t\t\t\t  document.getElementById('t4u-custom-script').remove();\n\t\t\t\t\t}\n\n\t\t\t\t\thead.appendChild(script);\n\n\t\t\t\t\t//APPEND TEST ID\n\t\t\t\t\tdocument.getElementsByTagName('html')[0].classList.add(testId);\n\t\t\t\t}else {\n\t\t\t\t \treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tappendMassage(id:string) {\n\t\t\t\tif(obj.develop) { \n\t\t\t\t\tconsole.log('%c<-----------DEV ENVI' + '-----------' + id + '----------->', \"color: green; font-size:16px;\");\n\t\t\t\t}else {\n\t\t\t\t \treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}";
    return utility_str;
}
exports.utility = utility;
